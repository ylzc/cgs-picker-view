!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define("cgs-picker-view",["angular"],t):"object"==typeof exports?exports["cgs-picker-view"]=t(require("angular")):e["cgs-picker-view"]=t(e.angular)}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);t.default=n.a},function(e,t,i){"use strict";var n=i(2),r=i.n(n),o=i(3),s=(i.n(o),i(4));i.n(s);r.a.module("cgs-picker-view",[]).directive("pickerView",function(){return{restrict:"A",require:"ngModel",scope:{options:"=",datas:"="},link:function(e,t,i,n){t.bind("click",function(){new PickerView({bindElem:t[0],data:e.options.datas?e.options.datas:e.datas,title:e.options.title?e.options.title:"选择框",leftText:"取消",rightText:"确定",rightFn:function(e){n.$setViewValue(e)}})})}}}),t.a="cgs-picker-view"},function(t,i){t.exports=e},function(e,t){!function(){var e={extend:function(e){for(var t=1,i=arguments.length;t<i;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},indexOf:function(e,t){for(var i=-1,n=0,r=e.length;n<r;n++)if(e[n]===t){i=n;break}return i},css:function(e,t){for(var i in t)e.style[i]=t[i]},addClass:function(t,i){var n=t.className.split(/\s+/);-1==e.indexOf(n,i)&&n.push(i),t.className=n.join(" ")},removeClass:function(t,i){var n=t.className.split(/\s+/),r=e.indexOf(n,i);-1!==r&&n.splice(r,1),t.className=n.join(" ")},hasClass:function(t,i){if(!t||!t.className)return!1;var n=t.className.split(/\s+/);return-1!=e.indexOf(n,i)},parents:function(e,t){if(!e)return null;var i=e.parentNode;return i===document?null:(this.hasClass(i,t)||(i=this.parents(i,t)),i)},isObj:function(e){return"[object Object]"==Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)}};function t(e){for(var t in this.Opt={title:"标题",leftText:"取消",rightText:"确定",saveFn:function(e){}},e)e[t]&&(this.Opt[t]=e[t]);this._y_start="",this._y_move="",this._y_end="",this.top_start=0,this.isMove=!1,this.elem_wrap=null,this.elem_leftBtn=null,this.elem_rightBtn=null,this.elem_contents=null,this.elem_mask=null;var i=this.Opt.bindElem.getAttribute("selectcache");this.selectcache=i?i.split(","):[],this.selectArr=[],this.init()}t.VERSION="1.0.0",t.defaultOpt={headerHeight:45,itemHeight:34},t.prototype={constructor:t,getItemTpl:function(e){for(var t="",i=0;i<e.length;i++)t+='<div class="pickerView-item">'+e[i]+"</div>";return t},getItemsTpl:function(e){var i=this.selectcache[this.selectArr.length]?this.selectcache[this.selectArr.length]:0;this.selectArr.push(i);var n="",r=-i*t.defaultOpt.itemHeight,o=this.getItemTpl(e);return n+='<div index="'+(this.selectArr.length-1)+'" class="pickerView-box-content"><div style="background-size:100% '+this.padding+'px;" class="pickerView-box-content-mask"></div><div style="top:'+this.padding+'px;" class="pickerView-box-content-indicator"></div><div style="padding:'+this.padding+"px 0;transform:translate3d(0,"+r+'px,0)" fieldIndex="0" class="pickerView-items">'+o+"</div></div>"},renderItems:function(t){var i="",n=t,r=e.isObj(t);r&&(n=Object.keys(t)),i+=this.getItemsTpl(n);var o=this.selectArr[this.selectArr.length-1];return r&&(i+=this.renderItems(t[n[o]])),i},getTpl:function(){var e='<div class="pickerView-mask"></div><div class="pickerView-box"><div class="pickerView-box-header"><div class="pickerView-box-header-left pickerView-box-header-btn">取消</div><div class="pickerView-box-header-title">'+this.Opt.title+'</div><div class="pickerView-box-header-right pickerView-box-header-btn">确定</div></div><div class="pickerView-box-content-wrap">';return e+=this.renderItems(this.Opt.data),e+="</div></div>"},init:function(){var i=this,n=document.getElementsByTagName("body")[0],r=document.createElement("div");r.className="pickerView-wrap",this.elem_wrap=r,this.padding=(.4*document.documentElement.clientHeight-t.defaultOpt.headerHeight-t.defaultOpt.itemHeight)/2,r.innerHTML=this.getTpl(),n.appendChild(r),this.elem_mask=this.elem_wrap.getElementsByClassName("pickerView-mask")[0],this.elem_contents=this.elem_wrap.getElementsByClassName("pickerView-box-content-wrap")[0],this.elem_leftBtn=this.elem_wrap.getElementsByClassName("pickerView-box-header-left")[0],this.elem_rightBtn=this.elem_wrap.getElementsByClassName("pickerView-box-header-right")[0],this.elem_contents.addEventListener("touchstart",function(t){i.moveObj=e.parents(t.target,"pickerView-box-content").children[2],i.touchstart(t),t.stopPropagation()},!1),this.elem_contents.addEventListener("touchmove",function(e){i.touchmove(e),e.stopPropagation(),e.preventDefault()},!1),this.elem_contents.addEventListener("touchend",function(e){i.touchend(e),e.stopPropagation()},!1),this.elem_mask.addEventListener("touchend",function(e){i.closeComponent(),e.stopPropagation(),e.preventDefault()},!1),this.elem_leftBtn.addEventListener("touchend",function(e){i.closeComponent(),e.stopPropagation(),e.preventDefault()},!1),this.elem_rightBtn.addEventListener("touchend",function(e){for(var t=[],n=0;n<i.elem_contents.children.length;n++){var r=i.elem_contents.children[n].children[2],o=r.children.length>0?r.children[i.selectArr[n]].innerText:"";t.push(o)}i.Opt.rightFn(t),i.closeComponent(),i.Opt.bindElem.setAttribute("selectcache",i.selectArr),e.stopPropagation(),e.preventDefault()},!1)},touchstart:function(e){this._y_start=e.touches[0].pageY,this.isMove=!1,this.top_start=parseInt(this.moveObj.style.transform.split(",")[1])},touchmove:function(t){this.isMove=!0,this._y_move=t.touches[0].pageY;var i=parseFloat(this._y_move)-parseFloat(this._y_start)+parseFloat(this.top_start);e.css(this.moveObj,{transform:"translate3d(0,"+i+"px,0)"}),this.top_end=i},touchend:function(i){if(this.isMove){this.isMove=!1;var n=this,r=t.defaultOpt.itemHeight,o=this.top_end>=0?1:-1,s=this.moveObj.parentNode.getAttribute("index"),a=Math.round(Math.abs(this.top_end)/r),l=o*(a*r);l>0?(l=0,a=0):l<-(this.moveObj.children.length-1)*r&&(l=-(this.moveObj.children.length-1)*r,a=this.moveObj.children.length-1),this.selectArr[s]=a,this.moveObj.setAttribute("fieldIndex",a),this.moveObj.style.transition="0.3s cubic-bezier(0,0,0.2,1.15)",e.css(n.moveObj,{transform:"translate3d(0,"+l+"px,0)"}),n.changeNext(s),n.moveObj.addEventListener("transitionend",function(e){n.moveObj.style.transition=""},!1),n.moveObj.addEventListener("webkitTransitionEnd",function(e){n.moveObj.style.transition=""},!1)}},changeNext:function(t){for(var i=this.Opt.data,n=[],r=0;r<this.selectArr.length;r++){var o=this.elem_contents.children[r].children[2];if(r>t)e.css(o,{transform:"translate3d(0,0,0)"}),this.selectArr[r]=0,n=e.isObj(i)?Object.keys(i):i,o.innerHTML=this.getItemTpl(n),i=i[n[0]];else i=i[o.children[this.selectArr[r]].innerText]}},closeComponent:function(){document.getElementsByTagName("body")[0].removeChild(this.elem_wrap)}},window.PickerView=t}()},function(e,t,i){var n=i(5);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(7)(n,r);n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(6)(!1)).push([e.i,"@keyframes slideUp{0%{bottom:-40%}to{bottom:0}}@-moz-keyframes slideUp{0%{bottom:-40%}to{bottom:0}}@-webkit-keyframes slideUp{0%{bottom:-40%}to{bottom:0}}@-o-keyframes slideUp{0%{bottom:-40%}to{bottom:0}}.pickerView-wrap *{margin:0;padding:0;list-style:none;-webkit-box-sizing:border-box;-ms-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-size:0}.pickerView-wrap{position:fixed;left:0;top:0;height:100%;width:100%}.pickerView-mask{height:100%;width:100%;background:rgba(0,0,0,.4)}.pickerView-box{height:40%;bottom:0;padding-top:45px;animation:slideUp .3s}.pickerView-box,.pickerView-box-header{width:100%;position:absolute;left:0;background:#fff}.pickerView-box-header{text-align:center;height:45px;border-bottom:1px solid #ddd;padding:0 50px;top:0;z-index:10}.pickerView-box-header>div{line-height:44px;font-size:16px}.pickerView-box-header-btn{height:100%;width:50px;position:absolute;top:0;color:#108ee9}.pickerView-box-header-left{left:0}.pickerView-box-header-right{right:0}.pickerView-box-header-title{text-align:center;height:100%;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.pickerView-box-content-wrap{height:100%;width:100%;overflow:hidden;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.pickerView-box-content{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;position:relative}.pickerView-box-content-mask{position:absolute;left:0;bottom:0;height:100%;margin:0 auto;width:100%;z-index:3;background-image:-webkit-linear-gradient(top,hsla(0,0%,100%,.95),hsla(0,0%,100%,.6)),-webkit-linear-gradient(bottom,hsla(0,0%,100%,.95),hsla(0,0%,100%,.6));background-image:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,.95)),to(hsla(0,0%,100%,.6))),-webkit-gradient(linear,left bottom,left top,from(hsla(0,0%,100%,.95)),to(hsla(0,0%,100%,.6)));background-image:linear-gradient(180deg,hsla(0,0%,100%,.95),hsla(0,0%,100%,.6)),linear-gradient(0deg,hsla(0,0%,100%,.95),hsla(0,0%,100%,.6));background-position:top,bottom;background-size:100% 102px;background-repeat:no-repeat}.pickerView-box-content-indicator{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:34px;position:absolute;left:0;top:102px;z-index:3;border-top:1px solid #ddd;border-bottom:1px solid #ddd}.pickerView-items{position:absolute;left:0;top:0;width:100%;z-index:1;padding:102px 0}.pickerView-item{touch-action:manipulation;text-align:center;font-size:16px;height:34px;line-height:34px;color:#000;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[i].concat(o).concat([r]).join("\n")}var s;return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(n[o]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(e,t,i){var n,r,o={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=n.apply(this,arguments)),r}),a=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var i=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),l=null,c=0,p=[],d=i(8);function h(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=o[n.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](n.parts[s]);for(;s<n.parts.length;s++)r.parts.push(g(n.parts[s],t))}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(g(n.parts[s],t));o[n.id]={id:n.id,refs:1,parts:a}}}}function u(e,t){for(var i=[],n={},r=0;r<e.length;r++){var o=e[r],s=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function f(e,t){var i=a(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=p[p.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),p.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(e.insertInto+" "+e.insertAt.before);i.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function b(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach(function(i){e.setAttribute(i,t[i])})}function g(e,t){var i,n,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var s=c++;i=l||(l=b(t)),n=k.bind(null,i,s,!1),r=k.bind(null,i,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),n=function(e,t,i){var n=i.css,r=i.sourceMap,o=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||o)&&(n=d(n));r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,t),r=function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=b(t),n=function(e,t){var i=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),r=function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=u(e,t);return h(i,t),function(e){for(var n=[],r=0;r<i.length;r++){var s=i[r];(a=o[s.id]).refs--,n.push(a)}e&&h(u(e,t),t);for(r=0;r<n.length;r++){var a;if(0===(a=n[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete o[a.id]}}}};var x,w=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function k(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,n=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?i+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}}])});